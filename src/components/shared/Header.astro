---
import { data } from '@components/home-page/travel/data';
import Brand from '@components/ui/Brand.astro';
import Link from '@components/ui/Link.astro';
---

<div
  dir='ltr'
  class='bg-dark-green sticky w-full top-0 py-3 px-5 z-20 h-auto flex justify-center text-theme-white'>
  <nav
    aria-label='Main Navigation'
    role='navigation'
    class='w-full flex h-full items-center justify-between max-w-screen-2xl'>
    <!-- Brand -->
    <Brand />

    <!-- Nav Menu -->
    <div
      id='navmenu'
      class={`is_closed pt-20 pb-6 px-5 xl:p-0 xl:flex-row flex flex-col justify-between bg-dark-green w-full fixed transition inset-0 h-dvh z-10 xl:static xl:flex xl:flex-grow xl:items-center xl:justify-end xl:gap-x-9 overflow-hidden transition-height duration-150 xl:h-auto`}>
      <!-- Nav Links -->
      <ul
        class='nav_links xl:flex text-2xl xl:text-base font-bold xl:justify-center xl:gap-10 xl:flex-row flex flex-col gap-y-5'
        dir='rtl'>
        {
          data.map((item) => (
            <li>
              <a href={item.href} class='text-pretty hover:text-light-green'>
                {item.title}
              </a>
            </li>
          ))
        }
        <li>
          <a href='/#airport' class='text-pretty hover:text-light-green'>
            איסוף משדה התעופה
          </a>
        </li>
      </ul>

      <div class='flex justify-center'>
        <Link />
      </div>
    </div>

    <!-- Hamburger menu -->
    <button
      aria-label='menu'
      role='button'
      aria-controls='navmenu'
      aria-expanded='false'
      id='menuButton'
      class='w-12 h-12 xl:hidden cursor-pointer text-2xl flex items-center justify-center relative z-20 left-4'>
      <i class='ph ph-list'></i>
    </button>
  </nav>
</div>

<script>
  document.addEventListener('DOMContentLoaded', (_) => {
    const menuButton = document.getElementById('menuButton');
    const navMenu = document.getElementById('navmenu');
    const navLinks = document.querySelectorAll('.nav_links a');
    const body = document.querySelector('body');
    const desktopSize = 1280;

    let isMenuOpen = false;

    const handleHideNavbar = () => {
      isMenuOpen = false;
      if (navMenu && body) {
        navMenu.style.transform = 'translateX(100%)';
        navMenu.style.pointerEvents = 'none';
        body.style.overflow = 'auto';
        body.style.height = 'auto';
      }
    };

    const handleShowNavbar = () => {
      if (navMenu && body) {
        navMenu.style.transform = 'translateX(0)';
        navMenu.style.pointerEvents = 'auto';
        body.style.overflow = 'hidden';
        body.style.height = '100dvh';
      }
    };

    if (menuButton && navMenu) {
      menuButton.addEventListener('click', () => {
        isMenuOpen = !isMenuOpen;

        menuButton.setAttribute('aria-expanded', `${isMenuOpen}`);

        if (isMenuOpen) {
          handleShowNavbar();
        } else {
          handleHideNavbar();
        }
      });

      navLinks.forEach((link) => {
        if (window.innerWidth < desktopSize) {
          link.addEventListener('click', () => handleHideNavbar());
        }
      });

      window.addEventListener('resize', () => {
        if (window.innerWidth >= desktopSize) {
          handleHideNavbar();
        }
      });
    }
  });
</script>

<style>
  @media screen and (max-width: 1279px) {
    #navmenu {
      transform: translateX(100%);
      pointer-events: none;
    }
  }
</style>
